/*! templater v0.1.0 01-07-2014 https://github.com/sadams/templater  */
(function(){"use strict";function a(a,b,c,d){function e(){if(a.cacheRequests=a.cacheRequests!==!1,a.templates=a.templates||[],!p)throw new Error("Missing Q promises dependency");if(!n)throw new Error("Missing jQuery dependency");if(!o)throw new Error("Missing underscore dependency")}function f(b){return a.cacheRequests&&q[b]||(q[b]=new p(n.ajax(b))),q[b]}function g(b){return a.noCompile?b:o.template(b)}function h(a,b){var c,d=p.defer();return b&&a.singular&&a.name!==b?void 0:(c=a.path?f(a.path):p.fcall(function(){return a.template}),c.then(function(b){var c={};switch(a.type){case l:var e=n(b);o.each(a.sections,function(a){c[a.name]=g(e.filter(a.selector).text())});break;case m:c[a.name]=g(b);break;default:throw new Error("template type "+a.type+" invalid")}d.resolve(c)}),d.promise)}function i(a){var b=[];return o.each(a,function(a){b.push(h(a))}),p.all(b)}function j(b,c){return p.all([i(a.templates,c),i(b,c)]).then(function(a){var b=o.extend(o.extend.apply(o,a[0]),o.extend.apply(o,a[1]));return b})}function k(a,b){return j(b,a).then(function(b){return b[a]})}var l="multiple",m="singular",n=b||window.jQuery,o=c||window._,p=d||window.Q,q={};return e(),{getTemplate:k}}var b=this;"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=a),exports.Templater=a):b.Templater=a}).call(this);